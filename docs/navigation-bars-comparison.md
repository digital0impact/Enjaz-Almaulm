# مقارنة شريطي التنقل: الرئيسية والفرعية

## 1. المصدر والموقع

| الجانب | الشريط في الصفحة الرئيسية (التبويبات) | الشريط في الصفحات الفرعية |
|--------|--------------------------------------|---------------------------|
| **الملف** | `app/(tabs)/_layout.tsx` | `components/BottomNavigationBar.tsx` |
| **النوع** | مكوّن `Tabs` من **expo-router** (React Navigation) | مكوّن مخصّص **BottomNavigationBar** |
| **كيفية الظهور** | يظهر تلقائياً مع كل شاشة داخل `(tabs)` (index, explore, performance, basicData) | يُستدعى يدوياً داخل كل صفحة فرعية (مثل idp، schedule، azkar، settings، إلخ) |

---

## 2. إظهار / إخفاء الشريط

| الجانب | الرئيسية | الفرعية |
|--------|----------|----------|
| **التحكم** | من داخل `app/(tabs)/index.tsx`: عند `currentScreen === 'welcome'` أو `'login'` يتم إخفاء الشريط عبر `navigation.setOptions({ tabBarStyle: { display: 'none' } })` | لا يُخفى تلقائياً؛ يظهر دائماً حيثما وُضِع في الصفحة |
| **النتيجة** | الشريط يختفي في شاشة الترحيب وشاشة تسجيل الدخول فقط | الشريط ثابت في كل الصفحات التي تضم `<BottomNavigationBar />` |

---

## 3. المحتوى والترتيب

| الجانب | الرئيسية | الفرعية |
|--------|----------|----------|
| **عدد العناصر** | 4 | 4 |
| **العناصر والترتيب** | 1. الأدوات المساعدة (explore) 2. الأداء المهني (performance) 3. البيانات الأساسية (basicData) 4. الرئيسية (index) | **نفس الترتيب والعناوين** مع نفس المسارات: `/(tabs)/explore`, `/(tabs)/performance`, `/(tabs)/basicData`, `/(tabs)` |
| **الأيقونات** | gear، chart.bar.fill، person.circle.fill، house.fill | نفس الأيقونات |

---

## 4. آلية التنقل

| الجانب | الرئيسية | الفرعية |
|--------|----------|----------|
| **الآلية** | تنقّل بين **تبويبات** (تبديل الشاشة دون تكديس) | `router.push(tab.route)` — انتقال إلى مسار التبويب |
| **النتيجة** | المستخدم يبقى داخل نفس الـ tab stack؛ لا تراكم شاشات | حسب المسار والـ stack قد تُضاف شاشات؛ الضغط على "الرئيسية" يذهب إلى `/(tabs)` وقد لا يغلق الشاشة الحالية من الـ stack |
| **التبويب النشط** | النظام يحدد التبويب النشط تلقائياً حسب الشاشة المعروضة | يُحدد يدوياً عبر `pathname` في `isActive(route)`؛ إذا التبويب نشط لا يتم استدعاء `router.push` مرة أخرى |

---

## 5. المظهر والتصميم

| الجانب | الرئيسية | الفرعية |
|--------|----------|----------|
| **لون الخلفية** | `#E8F5F4` (مطابق) | `#E8F5F4` (مطابق) |
| **لون الأيقونة/النص** | `tabBarActiveTintColor` و `tabBarInactiveTintColor`: `#595b59` (نفس اللون للاثنين) | لون ثابت `#595b59` لجميع التبويبات |
| **تمييز التبويب النشط** | لا يوجد تمييز لوني (نفس اللون للنشط وغير النشط) | لا يوجد تمييز (جميع الأيقونات بنفس اللون) |
| **النص تحت الأيقونة** | يعرضه React Navigation تلقائياً (العنوان من options) | يُعرض نص صريح (fontSize: 10) داخل المكوّن |
| **الحدود والظل** | يعتمد على TabBarBackground و tabBarStyle الافتراضي | حد علوي ولون ظل محددان يدوياً (`borderTopColor`, `shadowOpacity`, `elevation`) |
| **الارتفاع** | يحدده النظام (بدون height صريح في _layout) | iOS: ارتفاع 88 مع `paddingBottom: 20` — Android/غيره: ارتفاع 68 |
| **الموضع** | `position: 'absolute'` على iOS ضمن tabBarStyle | `position: 'absolute'`, `bottom: 0`, `left: 0`, `right: 0` |
| **Blur (iOS)** | استخدام `TabBarBackground` — على iOS يستخدم `BlurView` (systemChromeMaterial) | استخدام `BlurView` مباشرة داخل الشريط (نفس الـ tint و intensity) |

---

## 6. التفاعل (Haptics / الضغط)

| الجانب | الرئيسية | الفرعية |
|--------|----------|----------|
| **اللمس** | زر التبويب مخصّص عبر **HapticTab** (ضغطة خفيفة على iOS عند الـ press) | `TouchableOpacity` مع `Haptics.impactAsync(Light)` عند الضغط على iOS داخل `handleTabPress` |
| **النتيجة** | اهتزاز خفيف عند الضغط على التبويب (iOS) | نفس السلوك تقريباً (اهتزاز خفيف على iOS) |

---

## 7. الفروقات التقنية المهمة

| الجانب | الرئيسية | الفرعية |
|--------|----------|----------|
| **التكامل مع التوجيه** | جزء من بنية التبويبات؛ تغيير التبويب = تغيير المسار دون إضافة إلى الـ stack | مكوّن عادي؛ التنقل عبر `router.push` قد يضيف مساراً إلى الـ stack (مثلاً عند فتح صفحة ثم الضغط على "الرئيسية") |
| **إعادة الاستخدام** | لا يُنسخ؛ شريط واحد تلقائي لجميع شاشات (tabs) | يُستدعى في عشرات الصفحات الفرعية يدوياً؛ أي تغيير في التصميم أو المسارات يتطلب أن المكوّن واحد فقط |
| **الدعم للمسارات** | يعرف النظام المسار الحالي تلقائياً (تبويب نشط) | يعتمد على `usePathname()`؛ منطق `isActive` يطابق `pathname` مع المسار (مع حالة خاصة لـ `/(tabs)` و `'/'`) |

---

## 8. ملخص سريع

- **الشكل والمحتوى:** متطابقان تقريباً (نفس 4 عناصر، نفس الأيقونات والعناوين، نفس الألوان والخلفية).
- **الظهور:** الرئيسية تُخفى في الترحيب وتسجيل الدخول؛ الفرعية تظهر أينما وُضِع المكوّن.
- **التنقل:** الرئيسية = تنقّل حقيقي بين التبويبات؛ الفرعية = `router.push` قد يختلف سلوك الـ stack.
- **تمييز النشط:** لا يوجد تمييز بصري في كلا الشريطين (لون واحد للجميع).
- **الارتفاع والتفاصيل:** الفرعية تحدد ارتفاعاً صريحاً (88 / 68) وحدوداً وظلاً؛ الرئيسية تعتمد أكثر على إعدادات التبويبات الافتراضية.

إذا أردت توحيد السلوك (مثلاً إغلاق الـ stack عند الضغط على "الرئيسية" من الصفحات الفرعية)، يمكن استخدام `router.replace` أو `router.dismissTo` بدلاً من `router.push` في `BottomNavigationBar` عند الانتقال إلى التبويبات.
