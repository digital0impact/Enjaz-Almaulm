# جداول Supabase الخاصة بتطبيق إنjaz المعلم فقط

هذا الملف يوضح **الجداول التي يستهلكها تطبيق إنjaz المعلم** فقط. قد تظهر في نفس مشروع Supabase جداول أخرى تابعة لتطبيق آخر (مثل نافس) — يمكنك تجاهلها عند العمل على إنjaz المعلم.

---

## الجداول المستخدمة في إنjaz المعلم

### 1) المستخدمون والملف الشخصي

| الجدول | الغرض | أين يُستعمل في التطبيق |
|--------|--------|-------------------------|
| **user_profiles** | الملف الشخصي: اسم، بريد، رقم الجوال، المسمى الوظيفي، مكان العمل. مرتبط بـ `auth.users.id` | التسجيل، الإعدادات، ربط الاشتراك بالهاتف (ويب هوك سلة) |
| **users** | نسخة المستخدم في التطبيق: اسم، بريد، رقم الجوال، دور، خطة اشتراك | يُحدَّث عند التسجيل وتحديث البيانات الأساسية |

---

### 2) الأداء والتقارير

| الجدول | الغرض | أين يُستعمل في التطبيق |
|--------|--------|-------------------------|
| **performance_data** | بيانات أداء المعلم (محاور، أدلة، درجات) — للتقرير التفاعلي والتقارير التفصيلية | حفظ/قراءة أداء المحاور، التقرير التفاعلي، التقرير المفصل |

---

### 3) التنبيهات والتعليقات

| الجدول | الغرض | أين يُستعمل في التطبيق |
|--------|--------|-------------------------|
| **alerts** | تنبيهات المعلم (تاريخ، وقت، عنوان، وصف) | إعدادات/شاشة التنبيهات |
| **comments** | تعليقات المعلم | حذف الحساب (مسح التعليقات قبل الحذف) |

---

### 4) الاشتراكات والأسعار

| الجدول | الغرض | أين يُستعمل في التطبيق |
|--------|--------|-------------------------|
| **subscriptions** | اشتراكات المستخدمين: نوع الخطة، تواريخ البداية/النهاية، السعر، ربط عملية الشراء | صفحة الاشتراك، التحقق من الصلاحيات، ويب هوك متجر سلة |
| **subscription_prices** | أسعار الخطط (سنوي، نصف سنوي) وعرض السعر للمستخدم | عرض الأسعار وإدارة الأسعار |

---

### 5) المرفقات والنسخ الاحتياطية

| الجدول | الغرض | أين يُستعمل في التطبيق |
|--------|--------|-------------------------|
| **file_attachments** | سجل الملفات المرفوعة (أدلة الأداء، إلخ) | رفع/حذف/عرض المرفقات |
| **backups** | سجل النسخ الاحتياطية للمستخدمين | نظام النسخ الاحتياطي والاستعادة |

---

### 6) إدارة الحساب

| الجدول | الغرض | أين يُستعمل في التطبيق |
|--------|--------|-------------------------|
| **account_deletion_requests** | طلبات حذف الحساب (سبب، حالة) | طلب حذف الحساب من الإعدادات |

---

## ملخص سريع

| الجدول | الوظيفة المختصرة |
|--------|------------------|
| **user_profiles** | ملف شخصي + رقم الجوال (لربط الشراء) |
| **users** | مستخدم التطبيق + رقم الجوال + خطة اشتراك |
| **performance_data** | محاور الأداء ودرجات التقرير التفاعلي |
| **alerts** | تنبيهات المعلم |
| **comments** | تعليقات المعلم |
| **subscriptions** | اشتراكات مدفوعة/مجانية |
| **subscription_prices** | أسعار الخطط |
| **file_attachments** | مرفقات الملفات |
| **backups** | نسخ احتياطية |
| **account_deletion_requests** | طلبات حذف الحساب |

---

## ملاحظة عن الجداول الأخرى في Supabase

إذا ظهرت في نفس المشروع جداول مثل: **classes**, **students**, **test_models**, **training_attempts**, **test_shares**, **game_attempts**, **game_shares**, **student_mastery**, **activities** — فهي **لا تُستعمل** في تطبيق إنjaz المعلم (قد تكون لمشروع آخر مثل نافس). تطبيق إنjaz المعلم يخزّن بيانات الطلاب والخطط العلاجية محلياً (AsyncStorage) ولا يعتمد على هذه الجداول.
